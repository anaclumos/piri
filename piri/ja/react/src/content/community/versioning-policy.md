---
title: バージョン管理ポリシー
---

<Intro>

すべての安定版のReactビルドは高レベルのテストを経ており、セマンティックバージョニング（semver）に従います。Reactはまた、実験的な機能に対する早期フィードバックを奨励するために、不安定なリリースチャネルも提供しています。このページでは、Reactのリリースから何を期待できるかを説明します。

</Intro>

過去のリリースの一覧については、[バージョン](/versions)ページを参照してください。

## 安定版リリース {/*stable-releases*/}

安定版のReactリリース（「最新」リリースチャネルとも呼ばれる）は、[セマンティックバージョニング（semver）](https://semver.org/)の原則に従います。

つまり、バージョン番号 **x.y.z** では：

* **重大なバグ修正**をリリースする場合、**z**番号を変更して**パッチリリース**を行います（例：15.6.2から15.6.3）。
* **新機能**や**重大でない修正**をリリースする場合、**y**番号を変更して**マイナーリリース**を行います（例：15.6.2から15.7.0）。
* **破壊的変更**をリリースする場合、**x**番号を変更して**メジャーリリース**を行います（例：15.6.2から16.0.0）。

メジャーリリースには新機能も含まれることがあり、どのリリースにもバグ修正が含まれる可能性があります。

マイナーリリースは最も一般的なリリースタイプです。

### 破壊的変更 {/*breaking-changes*/}

破壊的変更は誰にとっても不便なので、メジャーリリースの数を最小限に抑えるよう努めています。例えば、React 15は2016年4月にリリースされ、React 16は2017年9月にリリースされ、React 17は2020年10月にリリースされました。

その代わりに、新機能はマイナーバージョンでリリースします。つまり、マイナーリリースはその控えめな名前にもかかわらず、メジャーリリースよりも興味深く魅力的なことが多いです。

### 安定性へのコミットメント {/*commitment-to-stability*/}

時間が経つにつれてReactを変更する際、新機能を活用するために必要な労力を最小限に抑えるよう努めています。可能な限り、古いAPIを別のパッケージに移してでも動作させ続けます。例えば、[ミックスインは何年も前から推奨されていません](https://legacy.reactjs.org/blog/2016/07/13/mixins-considered-harmful.html)が、[create-react-class](https://legacy.reactjs.org/docs/react-without-es6.html#mixins)を通じて今日でもサポートされており、多くのコードベースで安定したレガシーコードとして使用されています。

100万人以上の開発者がReactを使用しており、数百万のコンポーネントを共同で維持しています。Facebookのコードベースだけでも50,000以上のReactコンポーネントがあります。つまり、Reactの新しいバージョンにアップグレードするのをできるだけ簡単にする必要があります。移行パスなしで大きな変更を行うと、人々は古いバージョンにとどまってしまいます。これらのアップグレードパスはFacebook自体でテストしています。10人未満のチームが50,000以上のコンポーネントを単独で更新できるなら、Reactを使用している誰にとってもアップグレードは管理可能であると期待しています。多くの場合、コンポーネントの構文をアップグレードするための[自動スクリプト](https://github.com/reactjs/react-codemod)を書き、それをオープンソースリリースに含めて誰でも使用できるようにしています。

### 警告を通じた段階的なアップグレード {/*gradual-upgrades-via-warnings*/}

Reactの開発ビルドには多くの有用な警告が含まれています。可能な限り、将来の破壊的変更に備えて警告を追加します。つまり、最新のリリースで警告がない場合、次のメジャーリリースと互換性があることを意味します。これにより、アプリを1つのコンポーネントずつアップグレードすることができます。

開発警告はアプリのランタイム動作に影響を与えません。そのため、開発ビルドと本番ビルドの間でアプリが同じように動作することを確信できます。唯一の違いは、本番ビルドでは警告が記録されず、より効率的であることです。（もしそうでない場合は、問題を報告してください。）

### 何が破壊的変更と見なされるか？ {/*what-counts-as-a-breaking-change*/}

一般的に、次の変更ではメジャーバージョン番号を上げません：

* **開発警告。** これらは本番の動作に影響を与えないため、メジャーバージョンの間に新しい警告を追加したり、既存の警告を変更したりすることがあります。実際、これにより将来の破壊的変更について確実に警告することができます。
* **`unstable_`で始まるAPI。** これらは実験的な機能として提供されており、APIにまだ自信がありません。`unstable_`プレフィックスを付けてリリースすることで、より早く安定したAPIに到達することができます。
* **Reactのアルファ版およびカナリア版。** Reactのアルファ版は新機能を早期にテストする方法として提供されますが、アルファ期間中に学んだことに基づいて変更を行う柔軟性が必要です。これらのバージョンを使用する場合、APIは安定版リリース前に変更される可能性があることに注意してください。
* **未公開のAPIおよび内部データ構造。** `__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED`や`__reactInternalInstance$uk43rzhitjg`のような内部プロパティ名にアクセスする場合、保証はありません。自己責任で行ってください。

このポリシーは実用的であることを意図しています：確かに、あなたに頭痛を引き起こしたくありません。これらの変更すべてに対してメジャーバージョンを上げると、より多くのメジャーバージョンをリリースすることになり、最終的にはコミュニティにとってバージョニングの痛みを引き起こすことになります。また、Reactの改善を望む速度で進めることができなくなります。

とはいえ、このリストの変更がコミュニティに広範な問題を引き起こすと予想される場合は、段階的な移行パスを提供するために最善を尽くします。

### マイナーリリースに新機能が含まれていない場合、なぜパッチではないのか？ {/*if-a-minor-release-includes-no-new-features-why-isnt-it-a-patch*/}

マイナーリリースに新機能が含まれていない可能性があります。[これはsemverで許可されています](https://semver.org/#spec-item-7)、**「[マイナーバージョン]は、プライベートコード内で大幅な新機能や改善が導入された場合に増加することがあります。パッチレベルの変更を含むことがあります。」**と述べています。

しかし、これらのリリースがなぜパッチとしてバージョン管理されないのかという疑問が生じます。

その答えは、React（または他のソフトウェア）への変更は予期しない方法で壊れるリスクがあるということです。1つのバグを修正するパッチリリースが別のバグを偶然に導入するシナリオを想像してください。これは開発者にとって混乱を引き起こすだけでなく、将来のパッチリリースに対する信頼を損ないます。特に、元の修正が実際にはめったに遭遇しないバグである場合は特に残念です。

Reactリリースをバグフリーに保つための実績はかなり良いですが、パッチリリースは信頼性のためにさらに高い基準を持っています。ほとんどの開発者は、パッチリリースを採用しても悪影響がないと仮定しています。

これらの理由から、パッチリリースは最も重大なバグやセキュリティ脆弱性にのみ予約されています。

リリースに内部リファクタリング、実装の詳細の変更、パフォーマンスの改善、または小さなバグ修正などの重要でない変更が含まれている場合、新機能がない場合でもマイナーバージョンを上げます。

## すべてのリリースチャネル {/*all-release-channels*/}

Reactは、バグレポートの提出、プルリクエストのオープン、および[RFCの提出](https://github.com/reactjs/rfcs)を行う活気に満ちたオープンソースコミュニティに依存しています。フィードバックを奨励するために、未リリースの機能を含む特別なビルドのReactを共有することがあります。

<Note>

このセクションは、フレームワーク、ライブラリ、または開発者ツールに取り組んでいる開発者に最も関連があります。主にユーザー向けアプリケーションを構築するためにReactを使用する開発者は、事前リリースチャネルについて心配する必要はありません。

</Note>

Reactの各リリースチャネルは、異なる使用ケースに合わせて設計されています：

- [**最新**](#latest-channel)は、安定したsemverのReactリリース用です。npmからReactをインストールするときに得られるものです。これは、今日すでに使用しているチャネルです。**Reactを直接消費するユーザー向けアプリケーションはこのチャネルを使用します。**
- [**カナリア**](#canary-channel)は、Reactソースコードリポジトリのメインブランチを追跡します。これらは次のsemverリリースのリリース候補と考えてください。**[フレームワークやその他のキュレーションされたセットアップは、このチャネルをReactの固定バージョンで使用することを選択する場合があります。](/blog/2023/05/03/react-canaries) カナリアは、Reactとサードパーティプロジェクト間の統合テストにも使用できます。**
- [**実験的**](#experimental-channel)は、安定版リリースにはない実験的なAPIや機能を含みます。これらもメインブランチを追跡しますが、追加の機能フラグがオンになっています。リリース前の機能を試すためにこれを使用してください。

すべてのリリースはnpmに公開されますが、セマンティックバージョニングを使用するのは最新のみです。事前リリース（カナリアおよび実験的チャネルのもの）は、その内容のハッシュとコミット日から生成されたバージョンを持ちます。例：カナリアの場合は`18.3.0-canary-388686f29-20230503`、実験的の場合は`0.0.0-experimental-388686f29-20230503`。

**最新およびカナリアチャネルの両方がユーザー向けアプリケーションに公式にサポートされていますが、期待は異なります**：

* 最新リリースは従来のsemverモデルに従います。
* カナリアリリースは[固定する必要があります](/blog/2023/05/03/react-canaries)し、破壊的変更を含む場合があります。これらは、独自のリリーススケジュールで新しいReact機能やバグ修正を段階的にリリースしたいキュレーションされたセットアップ（フレームワークなど）のために存在します。

実験的リリースはテスト目的のみに提供されており、リリース間で動作が変わらないことを保証しません。これらは最新のリリースに使用するセマンティックバージョニングプロトコルに従いません。

安定版リリースに使用するのと同じレジストリに事前リリースを公開することで、[unpkg](https://unpkg.com)や[CodeSandbox](https://codesandbox.io)など、npmワークフローをサポートする多くのツールを活用することができます。

### 最新チャネル {/*latest-channel*/}

最新は安定したReactリリースに使用されるチャネルです。npmの`latest`タグに対応しています。これは、実際のユーザーに提供されるすべてのReactアプリに推奨されるチャネルです。

**どのチャネルを使用すべきかわからない場合は、最新です。** Reactを直接使用している場合、これがすでに使用しているものです。最新の更新は非常に安定していると期待できます。バージョンは[前述の通り](#stable-releases)、セマンティックバージョニングスキームに従います。

### カナリアチャネル {/*canary-channel*/}

カナリアチャネルは、Reactリポジトリのメインブランチを追跡する事前リリースチャネルです。カナリアチャネルの事前リリースは、最新チャネルのリリース候補として使用されます。カナリアは、最新よりも頻繁に更新されるスーパーセットと考えることができます。

最新のカナリアリリースと最新の最新リリースの間の変更の程度は、2つのマイナーsemverリリースの間に見られるものとほぼ同じです。しかし、**カナリアチャネルはセマンティックバージョニングに準拠していません。** カナリアチャネルの連続するリリース間で時折破壊的変更が発生することを期待してください。

**[カナリアワークフロー](/blog/2023/05/03/react-canaries)に従っていない限り、ユーザー向けアプリケーションに事前リリースを直接使用しないでください。**

カナリアのリリースはnpmの`canary`タグで公開されます。バージョンはビルドの内容のハッシュとコミット日から生成されます。例：`18.3.0-canary-388686f29-20230503`。

#### 統合テストにカナリアチャネルを使用する {/*using-the-canary-channel-for-integration-testing*/}

カナリアチャネルは、Reactと他のプロジェクト間の統合テストもサポートしています。

すべてのReactの変更は、公開される前に広範な内部テストを経ています。しかし、Reactエコシステム全体で使用される無数の環境と構成があり、すべてをテストすることは不可能です。

サードパーティのReactフレームワーク、ライブラリ、開発者ツール、または同様のインフラストラクチャタイプのプロジェクトの作者である場合、最新の変更に対して定期的にテストスイートを実行することで、ユーザーとReactコミュニティ全体のためにReactを安定させるのに役立ちます。興味がある場合は、次の手順に従ってください：

- お好みの継続的インテグレーションプラットフォームを使用してcronジョブを設定します。cronジョブは[CircleCI](https://circleci.com/docs/2.0/triggers/#scheduled-builds)や[Travis CI](https://docs.travis-ci.com/user/cron-jobs/)でサポートされています。
- cronジョブで、npmの`canary`タグを使用して、カナリアチャネルの最新のReactリリースにReactパッケージを更新します。npm cliを使用して：

  ```console
  npm update react@canary react-dom@canary
  ```

  またはyarnを使用して：

  ```console
  yarn upgrade react@canary react-dom@canary
  ```
- 更新されたパッケージに対してテストスイートを実行します。
- すべてが合格した場合、素晴らしいです！次のマイナーReactリリースでプロジェクトが動作することを期待できます。
- 予期せず何かが壊れた場合は、[問題を報告](https://github.com/facebook/react/issues)してください。

このワークフローを使用しているプロジェクトの一例としてNext.jsがあります。彼らの[CircleCI設定](https://github.com/zeit/next.js/blob/c0a1c0f93966fe33edd93fb53e5fafb0dcd80a9e/.circleci/config.yml)を参考にしてください。

### 実験的チャネル {/*experimental-channel*/}

カナリアと同様に、実験的チャネルはReactリポジトリのメインブランチを追跡する事前リリースチャネルです。カナリアとは異なり、実験的リリースには、広範なリリースにはまだ準備ができていない追加の機能やAPIが含まれています。

通常、カナリアへの更新には対応する実験的更新が伴います。これらは同じソースリビジョンに基づいていますが、異なるセットの機能フラグを使用してビルドされています。

実験的リリースはカナリアおよび最新のリリースとは大きく異なる場合があります。**実験的リリースをユーザー向けアプリケーションに使用しないでください。** 実験的チャネルのリリース間で頻繁に破壊的変更が発生することを期待してください。

実験的リリースはnpmの`experimental`タグで公開されます。バージョンはビルドの内容のハッシュとコミット日から生成されます。例：`0.0.0-experimental-68053d940-20210623`。

#### 実験的リリースには何が含まれるのか？ {/*what-goes-into-an-experimental-release*/}

実験的機能は、広範なリリースにはまだ準備ができておらず、最終的に大きく変更される可能性があります。いくつかの実験は最終的に確定しないかもしれません。実験を行う理由は、提案された変更の実行可能性をテストするためです。

例えば、実験的チャネルが存在していた場合、Hooksを発表したときに、最新で利用可能になる数週間前に実験的チャネルにHooksをリリースしていたでしょう。

実験的に対して統合テストを実行することが価値があると感じるかもしれません。これはあなた次第です。しかし、実験的はカナリアよりもさらに不安定であることに注意してください。**実験的リリース間の安定性は保証しません。**

#### 実験的機能についてもっと知るにはどうすればよいか？ {/*how-can-i-learn-more-about-experimental-features*/}

実験的機能は文書化されている場合とされていない場合があります。通常、実験はカナリアまたは最新で出荷される直前まで文書化されません。

機能が文書化されていない場合、[RFC](https://github.com/reactjs/rfcs)が付随することがあります。

新しい実験を発表する準備ができたら[Reactブログ](/blog)に投稿しますが、すべての実験を公表するわけではありません。

包括的な変更リストについては、常に公開GitHubリポジトリの[履歴](https://github.com/facebook/react/commits/main)を参照できます。